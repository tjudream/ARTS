#week

---

## Algorithm [905. Sort Array By Parity](https://leetcode.com/problems/sort-array-by-parity/)
### 1. 问题描述
按照奇偶校验排序数组。

给定一个数组A，其元素都是非负正整数。对 A 进行排序，要求所有偶数都在奇数之前。任意结果都接收。

例如：
* 输入 [3,1,2,4]
* 输出 [2,4,1,3], [4,2,3,1], [2,4,1,3] 或 [4,2,1,3] 4个中的任何一个都是对的。
### 2. 解题思路
1. 用两个指针 s, e 分别指向数组的头和尾。
2. 从头开始找到第一个奇数，从尾向前找到第一个偶数，交换这2个元素
3. 重复第2步，直到 s 大于 e

* 这里还有一个小技巧，用 A[s]&1 == 1 来判断奇偶，而不是用 A[s]%2 == 1 来判断。
因为位运算比取余运算性能更高。
### 3. 代码
```go
func sortArrayByParity(A []int) []int {
    s := 0
	e := len(A) - 1
	for s < e {
		for A[s]&1 == 0 && s < e {
			s++
		}
		for A[e]&1 == 1 && s < e {
			e--
		}
		if (s < e) {
			A[s],A[e] = A[e],A[s]
		}
	}
	return A
}
```
### 4. 复杂度分析
* 时间复杂度： O(N), N 是数组 A 的元素个数。 s, e 分别从头尾遍历数组，对数组只遍历了1遍
* 空间复杂度： O(1), 只需要2个指针的空间来存储 s, e

---

## Review [Why Defensive Programming is the Best Way for Robust Coding](https://medium.com/swlh/why-defensive-programming-is-the-best-way-for-robust-coding-cfa790fe04cd)
### 为什么防御性编程是健壮代码的最佳实践
防御性编程是指程序员预测问题并且写代码来处理他们。

这就像将来发生车祸……但是你依旧淡定，因为你已经买了保险。

也就是说，防御性编程的关键在于防范你不期望发生的错误。一个防御性程序员会在一个麻烦成为实际问题之前避免它。其主要思想是永远不要编写永不失败的代码。
这是一个乌托邦式的梦想。其主要思想是在遇到任何没有预期到的问题时，使代码优雅的失败。
优雅的失败指的是如下几种情况：
* 尽早失败：你的代码应该确保所有重要的操作都提前终止，尤其是如果这些操作的计算量很大或者可能对数据造成不可逆的影响。
* 安全的失败：在失败的地方，你的代码应该要确保释放所有的锁，不会申请新的锁，不会写文件等。
* 清晰的失败：当某些东西出问题时，你的代码应该返回一条清晰的错误信息，并且这个信息描述可以使得支持团队解决这个问题。

好了，到这里你可能会反对。

现在没有问题。我的代码运行的很好。为什么我要花时间和精力在"未来预期"的问题上呢？毕竟，我们总是被反复的教授"你不需要它(You Ain’t Gonna Need It)"(YAGNI).
而且你是一个专业的程序员，而不是一个随意添加代码的业余爱好者。

关键在于实用主义。

Andrew Hunt 在他的书《程序员修炼之道》中将防御性编程描述为"注重实效的偏执(Pragmatic Paranoia)"。

保护你的代码不受其他人和你自己错误的影响。如果有疑虑，就验证它。检查数据一致性和完整性。你不可能测试到每一个错误，因此使用断言和异常处理来处理那些"不可能发生"的事情。

健康的偏执编程是正确的编程方式。但是不能太过于偏执。关键在于适当的平衡。

以下是一些防御性编程的方式。

#### 问你自己：这里会失败吗？
每一行代码都会做一些事情，所以第一道防线就是问你自己如果代码失败了，会怎么样。

例如，考虑以下不符合规范的代码
```java
CASE SY-INDEX. // Noncompliant; missing WHEN OTHERS clause
WHEN ONE.
WRITE ‘One’.
WHEN 2.
WRITE ‘Two’.
ENDCASE.
```

我们会问如下两个问题：
* 如果 sy-index 不是 1 会发生什么。
* 如果 sy-index 不是 2 会发生什么。

为了解决这些问题，我们增加了 OTHERS 代码段：
```java
CASE SY-INDEX.
WHEN ONE.
WRITE ‘One’.
WHEN 2.
WRITE ‘Two’.
WHEN OTHERS. // Compliant
WRITE ‘Unexpected result’
ENDCASE.
```

是不是很简单？



---

## Tip

### 

---
    
## Share
### 

